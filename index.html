<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>University Timetable - Groups 1-12</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }
        h1 { margin: 0; color: #d35400; font-size: 28px; font-family: 'Brush Script MT', cursive; }
        h2 { margin: 10px 0 5px; color: #34495e; font-size: 20px; }
        h3 { margin: 0; color: #7f8c8d; font-weight: normal; }
        
        .controls {
            text-align: center;
            margin-bottom: 25px;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }
        select {
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            border: 2px solid #3498db;
            color: #2c3e50;
            cursor: pointer;
            outline: none;
            font-weight: bold;
        }
        select:hover { border-color: #2980b9; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            border: 2px solid #333;
            padding: 15px;
            text-align: center;
            vertical-align: middle;
            width: 16%;
        }
        th {
            background-color: #fff;
            color: #c0392b; /* Red header text */
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
            text-align: left;
            font-size: 1.1em;
        }
        .time-col {
            color: #c0392b;
            font-weight: bold;
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
            text-align: left;
        }

        /* Cell Types */
        .lecture {
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 8px;
            border-radius: 4px;
            width: 100%;
            box-sizing: border-box;
        }
        .practical {
            background-color: #d1ecf1;
            border-left: 5px solid #17a2b8;
            padding: 8px;
            border-radius: 4px;
            width: 100%;
            box-sizing: border-box;
        }
        .type { display: block; font-size: 0.8em; color: #666; text-transform: uppercase; margin-bottom: 4px; }
        .subject { display: block; font-weight: bold; font-size: 1.2em; color: #2c3e50; margin-bottom: 4px; }
        .room { display: block; font-size: 0.95em; color: #555; }
        .empty { color: #ccc; }

        .legend {
            margin-top: 25px;
            display: flex;
            justify-content: center;
            gap: 30px;
            font-size: 0.9em;
        }
        .legend-item { display: flex; align-items: center; gap: 8px; }
        .dot { width: 15px; height: 15px; border-radius: 50%; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>SEMESTER 4 SCHEDULE</h1>
        <h2 id="group-title">Select a Group</h2>
        <h3>University of Constantine 2</h3>
    </header>

    <div class="controls">
        <label for="year-select" style="margin-right: 10px; font-weight: bold;">Select Year:</label>
        <select id="year-select" onchange="updateYear()">
            <option value="L2">L2 (Tronc Commun)</option>
            <option value="L3_GL">L3 (Genie Logiciel)</option>
        </select>

        <label for="group-select" style="margin-left: 20px; margin-right: 10px; font-weight: bold;">Select Group:</label>
        <select id="group-select" onchange="renderTimetable()">
            <option value="1">Group 1</option>
            <option value="2">Group 2</option>
            <option value="3">Group 3</option>
            <option value="4" selected>Group 4</option>
            <option value="5">Group 5</option>
            <option value="6">Group 6</option>
            <option value="7">Group 7</option>
            <option value="8">Group 8</option>
            <option value="9">Group 9</option>
            <option value="10">Group 10</option>
            <option value="11">Group 11</option>
            <option value="12">Group 12</option>
        </select>
    </div>

    <table>
        <thead>
            <tr>
                <th>Day/Time</th>
                <th>08:30 - 10:00</th>
                <th>10:00 - 11:30</th>
                <th>11:30 - 13:00</th>
                <th>13:00 - 14:30</th>
                <th>14:30 - 16:00</th>
            </tr>
        </thead>
        <tbody id="timetable-body">
            <!-- Content filled by JS -->
        </tbody>
    </table>

    <div class="legend">
        <div class="legend-item">
            <span class="dot" style="background-color: #ffc107;"></span>
            <span>Lecture (Cours)</span>
        </div>
        <div class="legend-item">
            <span class="dot" style="background-color: #17a2b8;"></span>
            <span>TD / TP</span>
        </div>
    </div>
</div>

<script>
    // --- Data Definitions ---

    // === L2 (Tronc Commun - Groups 1-12) ===
    const lectures_L2 = {
        S1: {
            SUN_0830: { s: "AJEL", r: "Amphi A2" },
            SUN_1130: { s: "BD", r: "Amphi A2" },
            MON_1000: { s: "SE", r: "Amphi A2" },
            TUE_1300: { s: "RC", r: "Amphi A2" },
            WED_0830: { s: "TG", r: "Amphi A2" },
            THU_1000: { s: "DAW", r: "Amphi A2" },
            THU_1300: { s: "GL", r: "Amphi A2" } 
        },
        S2: {
            SUN_1000: { s: "AJEL", r: "Amphi A2" },
            MON_0830: { s: "SE", r: "Amphi A2" },
            TUE_1130: { s: "BD", r: "Amphi A2" },
            TUE_1430: { s: "RC", r: "Amphi A2" },
            WED_1000: { s: "TG", r: "Amphi A2" },
            THU_0830: { s: "DAW", r: "Amphi A2" },
            THU_1130: { s: "GL", r: "Amphi A2" }
        }
    };

    const data_L2 = {
        1: { // S1
            "SUN_1000": { s: "TG", r: "S40" },
            "MON_0830": { s: "??", r: "S??" }, 
            "MON_1300": { s: "??", r: "TP?" }, 
            "TUE_1000": { s: "??", r: "S??" },
            "WED_1130": { s: "GL", r: "S39" }, 
            "THU_0830": { s: "BD", r: "TPX" },
        },
        2: { // S1
            "SUN_1000": { s: "GL", r: "S39" },
            "SUN_1430": { s: "SE", r: "TP4" }, // Corrected "Lab 4" to "TP4"
            "MON_0830": { s: "RC", r: "S40" },
            "MON_1300": { s: "SE", r: "S40" },   
            "TUE_0830": { s: "BD", r: "TP6" },
            "TUE_1130": { s: "BD", r: "S40" },
            "TUE_1430": { s: "DAW", r: "TP6" },
            "WED_1000": { s: "RC", r: "TP9" },
            "THU_0830": { s: "TG", r: "SX" } 
        },
        3: { // S1
            "MON_0830": { s: "RC", r: "TP6" },
            "TUE_0830": { s: "BD", r: "TP9" },
            "TUE_1130": { s: "DAW", r: "TP6" },
            "TUE_1430": { s: "TG", r: "SX" },
            "WED_1000": { s: "GL", r: "S39" },
            "THU_0830": { s: "SE", r: "TP9" }, 
            "THU_1130": { s: "BD", r: "S29" }
        },
        4: { // S1 (Verified)
            "SUN_1000": { s: "DAW", r: "TP6" },
            "MON_0830": { s: "SE", r: "TP9" },
            "MON_1300": { s: "RC", r: "TP6" },
            "TUE_1130": { s: "TG", r: "SX" },
            "TUE_1430": { s: "GL", r: "S39" },
            "WED_1000": { s: "RC", r: "SX" },
            "WED_1300": { s: "BD", r: "S39" },
            "THU_1130": { s: "BD", r: "TP9" },
            "SUN_1430": { s: "SE", r: "S33" }
        },
        5: { // S1
            "MON_0830": { s: "GL", r: "S39" },
            "TUE_1130": { s: "BD", r: "TP9" },
            "WED_1000": { s: "RC", r: "TP6" },
            "THU_0830": { s: "BD", r: "S31" },
            "THU_1130": { s: "TG", r: "SX" } 
        },
        6: { // S1
            "SUN_1000": { s: "SE", r: "TP9" }, 
            "MON_0830": { s: "DAW", r: "TP4" },
            "MON_1130": { s: "GL", r: "S39" }, 
            "TUE_1430": { s: "BD", r: "TP9" },
            "WED_1000": { s: "SE", r: "S40" },
            "THU_0830": { s: "TG", r: "SY" } 
        },
        // --- S2 Groups (G7-G12) ---
        7: { // S2
            "SUN_0830": { s: "DAW", r: "TP6" },
            "SUN_1130": { s: "RC", r: "S40" },
            "MON_1000": { s: "RC", r: "TP6" },
            "TUE_0830": { s: "TG", r: "S31" },
            "WED_0830": { s: "SE", r: "S40" },
            "WED_1130": { s: "BD", r: "S38" },
            "THU_1000": { s: "SE", r: "TP9" }
        },
        8: { // S2
            "SUN_0830": { s: "TG", r: "S40" },
            "MON_1000": { s: "RC", r: "S40" },
            "TUE_1300": { s: "GL", r: "S39" },
            "THU_1000": { s: "BD", r: "TPX" },
            "THU_1300": { s: "SE", r: "TP5" }
        },
        9: { // S2
            "SUN_0830": { s: "BD", r: "TP4" },
            "SUN_1130": { s: "DAW", r: "TP6" },
            "MON_1000": { s: "GL", r: "S39" },
            "TUE_1300": { s: "TG", r: "SX" },
            "WED_1130": { s: "SE", r: "S40" }, 
            "THU_1300": { s: "BD", r: "S29" }
        },
        10: { // S2
            "SUN_0830": { s: "GL", r: "S39" },
            "SUN_1130": { s: "SE", r: "TP9" }, 
            "MON_1000": { s: "BD", r: "S38" },
            "TUE_1300": { s: "DAW", r: "TP6" },
            "WED_0830": { s: "RC", r: "TP6" },
            "THU_1000": { s: "TG", r: "SX" }, 
            "THU_1300": { s: "BD", r: "TP9" }
        },
        11: { // S2
            "SUN_0830": { s: "BD", r: "S38" },
            "SUN_1130": { s: "SE", r: "S39" }, 
            "MON_1000": { s: "SE", r: "TP9" }, 
            "TUE_0830": { s: "BD", r: "S40" }, 
            "TUE_1300": { s: "BD", r: "TP9" },
            "WED_0830": { s: "GL", r: "S39" }, 
            "THU_1300": { s: "TG", r: "SX" } 
        },
        12: { // S2
            "SUN_0830": { s: "SE", r: "TP9" },
            "SUN_1130": { s: "BD", r: "S33" },
            "MON_1000": { s: "DAW", r: "TP4" },
            "WED_0830": { s: "RC", r: "TP9" },
            "THU_1000": { s: "GL", r: "S29" } 
        }
    };

    // === L3 (Genie Logiciel - Groups 1-4) ===
    const data_L3_GL = {
        1: {
            "SUN_1000": { s: "GL (TD)", r: "S25" },
            "SUN_1300": { s: "GL (Cours)", r: "S2" },
            "MON_0830": { s: "TP7", r: "TP" }, 
            "MON_1000": { s: "TP7", r: "TP" }, // Assuming double session logic or shared
            "TUE_1000": { s: "TP7", r: "TP" },
            "WED_0830": { s: "Atelier 1", r: "S2" },
            "WED_1000": { s: "Atelier 1", r: "S2" }
        },
        2: {
            "SUN_0830": { s: "GL (TD)", r: "S25" },
            "SUN_1300": { s: "S26 (?)", r: "S26" }, 
            "SUN_1430": { s: "TP11", r: "TP" },
            "TUE_0830": { s: "TP7", r: "TP" }, 
            "WED_0830": { s: "Atelier 2", r: "S25" },
            "WED_1000": { s: "Atelier 2", r: "S25" }
        },
        3: {
            "SUN_1000": { s: "TP11", r: "TP" },
            "SUN_1300": { s: "TP11", r: "TP" },
            "SUN_1430": { s: "GL (TD)", r: "S26" },
            "TUE_0830": { s: "S2 (?)", r: "S2" },
            "WED_0830": { s: "Atelier 3", r: "S26" },
            "WED_1000": { s: "Atelier 3", r: "S26" }
        },
        4: {
            "SUN_1300": { s: "TP (MEL)", r: "S25" },
            "SUN_1430": { s: "GL (Cours)", r: "S2" },
            "MON_0830": { s: "GL (TD)", r: "S26" }, 
            "MON_1000": { s: "TP7", r: "TP" },
            "WED_0830": { s: "Atelier 4", r: "TP7" },
            "WED_1000": { s: "Atelier 4", r: "TP7" }
        }
    };
    
    // Lectures for L3 are generally integrated or not listed as separate "Amphi" blocks
    // So we'll skip a separate "lectures_L3" object and put everything in data_L3_GL for now,
    // unless there are explicit section-wide lectures.
    // (Image shows some rows like "S2" or "S26" which might be shared, but allocated per group).

    // --- Logic ---
    let currentYear = 'L2';
    let currentData = data_L2;
    let currentLectures = lectures_L2;

    function updateYear() {
        const yearSelect = document.getElementById('year-select');
        currentYear = yearSelect.value;
        const groupSelect = document.getElementById('group-select');

        // Update Data Source
        if (currentYear === 'L2') {
            currentData = data_L2;
            currentLectures = lectures_L2;
            // Update Group Options (1-12)
            groupSelect.innerHTML = '';
            for(let i=1; i<=12; i++) {
                let opt = document.createElement('option');
                opt.value = i;
                opt.innerText = `Group ${i}`;
                if(i===4) opt.selected = true; // Default
                groupSelect.appendChild(opt);
            }
        } else {
            currentData = data_L3_GL;
            currentLectures = {}; // No separate lecture object for L3 yet
            // Update Group Options (1-4)
            groupSelect.innerHTML = '';
            for(let i=1; i<=4; i++) {
                let opt = document.createElement('option');
                opt.value = i;
                opt.innerText = `Group ${i}`;
                groupSelect.appendChild(opt);
            }
        }
        renderTimetable();
    }

    function renderTimetable() {
        const groupSelect = document.getElementById('group-select');
        const groupId = parseInt(groupSelect.value);
        let section = 'S1'; 
        if (currentYear === 'L2') {
             section = groupId <= 6 ? 'S1' : 'S2';
        } else {
             section = 'L3'; // Just a label
        }
        
        document.getElementById('group-title').innerText = `Timetable for Group ${groupId} (${currentYear})`;
        
        const tbody = document.getElementById('timetable-body');
        tbody.innerHTML = ''; // Clear existing
        
        const days = ['SUN', 'MON', 'TUE', 'WED', 'THU'];
        const times = ['0830', '1000', '1130', '1300', '1430'];
        
        days.forEach(day => {
            const tr = document.createElement('tr');
            const tdDay = document.createElement('td');
            tdDay.className = 'time-col';
            tdDay.innerText = day;
            tr.appendChild(tdDay);

            times.forEach(time => {
                const td = document.createElement('td');
                const key = `${day}_${time}`;
                let session = null;

                // 1. Check Specific Group Data
                if (currentData[groupId] && currentData[groupId][key]) {
                    session = currentData[groupId][key];
                    session.type = 'practical';
                    session.label = 'TP / TD';
                }
                
                // 2. Check Lectures (only for L2 currently)
                if (!session && currentLectures[section] && currentLectures[section][key]) {
                    session = currentLectures[section][key];
                    session.type = 'lecture';
                    session.label = `Lecture (${section})`;
                }

                if (session) {
                    td.innerHTML = `
                        <div class="${session.type}">
                            <span class="type">${session.label}</span>
                            <span class="subject">${session.s}</span>
                            <span class="room">${session.r}</span>
                        </div>
                    `;
                } else {
                    td.className = 'empty';
                    td.innerText = '-';
                }
                tr.appendChild(td);
            });
            tbody.appendChild(tr);
        });
    }

    // Initial render setup
    // We need to trigger the initial logic manually or ensure variables are set

</script>

</body>
</html>
